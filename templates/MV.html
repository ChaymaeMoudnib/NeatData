<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Handle MV</title>
    <link rel="icon" href="static/IMG/logo/neatlogo.png">
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="static/MV.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <style>    
        
/* save */

label {
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
}

select, input[type="text"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-shadow: inset 1px 1px 5px rgba(0, 0, 0, 0.1);
    font-size: 14px;
}

select:hover, input[type="text"]:focus {
    border-color: #2980b9;
    outline: none;
    box-shadow: 0 0 5px rgba(41, 128, 185, 0.5);
}

#customPathField {
    background: #f4f7f9;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
}

#customPathField label {
    color: #2980b9;
}
/* File Name Display */
.file-name-display {
    font-family: Arial, sans-serif;
    font-size: 0.9rem;
    color: #6684e9;
    padding:;
    text-align: center;
}


        /* Uploading Card */
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 55%;
            height: 28%;
            margin: 20px auto;
            background-color: #fff;
        }
        
        /* Header */
        .card-header {
            background-color: #639cf0;
            color: #fff;
            padding: 10px 15px;
            font-size: 0.9rem;
            border-top-left-radius: 15px;
            border-top-right-radius: 10px;
            text-align: center;
            font-weight: bold;
        }
        
        /* Card Body */
        .card-body {
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        /* Upload Form */
        #uploadForm {
            width: 100%;
            display: flex;
            flex-direction: row; /* Ensure row layout */
            align-items: center;
            justify-content: center;
            gap: 18px;
        }
        
        /* Custom File Upload */
        .custom-file-upload {
            display: inline-block;
            padding: 12x 80px;
            cursor: pointer;
            border-radius: 5px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            transition: 0.3s ease-in-out;
            font-size: 0.9rem;
            color: #4179d3;
            font-weight: bold;
            text-align: center;
        }
        
        .custom-file-upload:hover {
            border-color: #007bff;
            background-color: #e9f3ff;
        }
        
        .custom-file-upload input[type="file"] {
            display: none;
        }
    
        
        /* Buttons - Aligned in Row */
        .button-container {
            display: flex;
            flex-direction: row; /* Keep buttons in a row */
            justify-content: center;
            gap: 10px;
            width: 100%;
        }
        
        /* Buttons */
        button {
            font-weight:strong;
            padding: 15px 30px;
            font-size: 1rem;
            border-radius: 5px;
            transition: 0.3s ease-in-out;
        }
        
        .btn-primary {
            background-color: #639cf0;
            border: none;
            color: white;
            flex: 1;
            font-weight: bold;
        }
        
        .btn-primary:hover {
            background-color: #0056b3;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .btn-success {
            background-color: #28a745;
            color: white;
            border: none;
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .btn-danger {
            background-color: #dc3545;
            color: white;
            border: none;
            flex: 1;
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        /* Utility Classes */
        .d-flex {
            display: flex;
        }
        
        .flex-column {
            flex-direction: column;
        }
        
        .justify-content-center {
            justify-content: center;
        }
        
        .align-items-center {
            align-items: center;
        }
        
        .gap-3 {
            gap: 20px;
        }
        
        .w-100 {
            width: 100%;
        }
        
        .hidden {
            display: none;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .card {
                width: 90%;
            }
        
            #uploadForm {
                flex-direction: row; /* Keeps row layout */
                flex-wrap: wrap; /* Ensures responsiveness */
                gap: 15px;
            }
        
            .button-container {
                flex-direction: row; /* Keeps row layout */
                flex-wrap: wrap;
            }
        
            .custom-file-upload {
                width: auto;
            }
        
            button {
                width: auto;
            }
        }
        /* Animated Heading */

        /* Base styles for step elements */
        .step {
            display: flex;
            align-items: center;
            margin: 0 0 40px -10px; /* Move slightly to the left with margin */
            width: 100%;
            max-width: 600px;
            cursor: pointer;
            transition: transform 0.3s ease;
            opacity: 0;
            animation: fadeInUp 0.5s ease forwards;
        }
        
        /* Animation delay for steps */
        .step:nth-child(1) { animation-delay: 0.5s; }
        .step:nth-child(2) { animation-delay: 1s; }
        .step:nth-child(3) { animation-delay: 1.5s; }
        .step:nth-child(4) { animation-delay: 2s; }
        .step:nth-child(5) { animation-delay: 2.5s; }
        .step:nth-child(6) { animation-delay: 3s; }
        .step:nth-child(7) { animation-delay: 3.5s; }
        .step:nth-child(8) { animation-delay: 4s; }
        .step:nth-child(9) { animation-delay: 4.5s; }
        
        /* Step hover effect */
        .step:hover {
            transform: scale(1.05);
        }
        
        /* Styles for step icons */
        .step-icon {
            width: 60px;
            height: 60px;
            color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-right: 20px;
            transition: background 0.3s ease, transform 0.3s ease;
        }
        
        .step:hover .step-icon {
            background: rgba(84, 125, 240, 0.8); /* Lighter shade */
            transform: rotate(360deg);
        }
        
        /* Styles for step content */
        .step-content {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(84, 125, 240, 0.1);
            flex: 1;
            text-align: left;
        }
        
        /* Heading and paragraph styles */
        .step-content h2 {
            font-size: 1.5rem;
            color: rgb(84, 125, 240); /* Primary blue */
            margin-bottom: 10px;
        }
        
        .step-content p {
            font-size: 1rem;
            color: #555;
            line-height: 1.5;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .step {
                flex-direction: column;
                align-items: flex-start;
                margin-left: 0; /* Reset margin for smaller screens */
            }
        
            .step-icon {
                margin-bottom: 10px;
            }
        }
        .link-style {
            color: #ffffff; /* White link color */
            text-decoration: none; /* No underline */
        }
        
        .link-style:hover {
            color: #ffc107; /* Change color on hover, if needed */
        }
        
        #downloadLinkBox {
            margin-top: 10px; /* Space between the message and link box */
            display: none; /* Hidden by default */
        }        
    </style>
</head>
<body>
<div class="split-container">
<!-- Information Section -->
<div class="info-section">
    <h2>About Handling Missing Values</h2>
    <p>
        Missing data is a common challenge in data analysis. This tool allows you to efficiently handle missing values by 
        offering a variety of solutions and advanced techniques. Whether you want to visualize missing data patterns, 
        delete unwanted rows or columns, or impute missing values with sophisticated methods, this tool has got you covered.
    </p>
    <p>
        You can explore the following functionalities:
    </p>
    <img src="static/IMG/mv.png" alt="Data Transformation Flow" class="info-image">

    <h3>Imputation Techniques Explained</h3>
    <img src="static/IMG/mv2.png" alt="Data Transformation Flow" class="info-image">
    <img src="static/IMG/mv3.png" alt="Data Transformation Flow" class="info-image">

    <button id="toggleTechniques" class="btn-success">Discover More Techniques!</button>
    <div id="additionalTechniques" class="additional-techniques" style="display:none;">
        <p><strong>Advanced Imputation Methods:</strong></p>
        <ul>
            <li><strong>Regression Imputation:</strong> Predict missing data using regression models.</li>
            <li><strong>Interpolation:</strong> Estimate values based on neighboring data points.</li>
        </ul>
    </div>
</div>
        <!-- Missing Values Functionality Section -->
<div class="functionality-section">
    <div class="step" id="step1">
        <div class="step-content">
            <h2>Missing Data Analysis</h2>
            <p>Identify and analyze missing data patterns in your dataset.</p>
        </div>
    </div>
                <div class="card my-4">
                <div class="card-header text-center">
                    <h5>Upload Your Dataset</h5>
                </div>
                <div class="card-body">
                    <form id="uploadForm" enctype="multipart/form-data" class="d-flex flex-row align-items-center gap-3">
                        <div class="file-upload-container">
                            <label for="fileInput" class="custom-file-upload">
                                <span id="filePlaceholder">Choose a File</span>
                                <input type="file" id="fileInput" name="file" required>
                            </label>
                        </div>
                        <div class="d-flex justify-content-center gap-3 w-100">
                            <button type="submit" class="btn btn-primary">Upload</button>
                            <button type="button" id="resetButton" class="btn btn-danger">Reset</button>
                        </div>
                    </form>
                    <div id="uploadMessage" class="mt-3"></div>
                </div>
            </div>

            <div id="messageBox" class="hidden" style="position: absolute; bottom: 20px; right: 20px; padding: 10px; border-radius: 5px; color: white;">
                <span id="messageContent"></span>
                <button id="messageButton" style="margin-left: 10px; background: none; border: none; color: white; cursor: pointer;">×</button>
            </div>
            <button id="toggleDataOverview" class="btn btn-warning">Show Data overview</button>                
            <div id="dataOverview" class="hidden">
                <h2>Data Overview & Visualisation</h2>
                <img id="missingValuesPlot" src="/images/missing_values_plot.png" alt="Missing Values Plot">
                <h3>Statistics About Missing Data</h3>
                <div id="missingDataTable"></div>
            </div>
            <h4>Choose an option to handle missing values:</h4>
            <form id="processForm">
                <label class="label"></label><br>
                <label class="radio-container">
                    <input type="radio" name="choice" value="1" required> Delete rows with missing values
                    <span class="checkmark"></span>
                </label>
                <label class="radio-container">
                    <input type="radio" name="choice" value="2" required> Delete columns with missing values
                    <span class="checkmark"></span>
                </label>
                <label class="radio-container">
                    <input type="radio" name="choice" value="3" required> Impute missing values
                    <span class="checkmark"></span>
                </label>
                <br>
                <div id="imputationMethods" class="hidden">
                    <label class="label">Choose an imputation method:</label><br>
                    <label class="radio-container">
                        <input type="radio" name="impute_choice" value="mean_median_mode"> Mean/Median/Mode Imputation
                        <span class="checkmark"></span>
                    </label>
                    <label class="radio-container">
                        <input type="radio" name="impute_choice" value="knn"> K-Nearest Neighbors (KNN) Imputation
                        <span class="checkmark"></span>
                    </label>
                    <label class="radio-container">
                        <input type="radio" name="impute_choice" value="mice"> Multiple Imputation by Chained Equations (MICE)
                        <span class="checkmark"></span>
                    </label>
                    <label class="radio-container">
                        <input type="radio" name="impute_choice" value="regression"> Regression Imputation
                        <span class="checkmark"></span>
                    </label>
                    <label class="radio-container">
                        <input type="radio" name="impute_choice" value="probability"> Probability Imputation
                        <span class="checkmark"></span>
                    </label>
                    <label class="radio-container">
                        <input type="radio" name="impute_choice" value="autoencoder"> Autoencoder Imputation
                        <span class="checkmark"></span>
                    </label>
                    <br>
        
                    <!-- Parameters for Mean/Median/Mode Imputation -->
                    <div id="meanMedianModeParams" class="hidden-params">
                        <label class="label">Choose a strategy:</label><br>
                        <label class="radio-container">
                            <input type="radio" name="strategy" value="mean"> Mean
                            <span class="checkmark"></span>
                        </label>
                        <label class="radio-container">
                            <input type="radio" name="strategy" value="median"> Median
                            <span class="checkmark"></span>
                        </label>
                        <label class="radio-container">
                            <input type="radio" name="strategy" value="mode"> Mode
                            <span class="checkmark"></span>
                        </label>
                        <label class="radio-container">
                            <input type="radio" name="strategy" value="most"> Most Frequent
                            <span class="checkmark"></span>
                        </label>
                    </div>
        
                    <!-- Parameters for KNN Imputation -->
                    <div id="knnParams" class="hidden-params">
                        <label class="label">Enter the number of neighbors for KNN Imputer:</label><br>
                        <input type="text" name="n_neighbors" class="row-md-8" placeholder="default=5"><br>
                        <label class="label">Choose a distance metric:</label><br>
                        <label class="radio-container">
                            <input type="radio" name="metric" value="euclidean"> Euclidean
                            <span class="checkmark"></span>
                        </label>
                        <label class="radio-container">
                            <input type="radio" name="metric" value="manhattan"> Manhattan
                            <span class="checkmark"></span>
                        </label>
                    </div>
        
                    <!-- Parameters for MICE Imputation -->
                    <div id="miceParams" class="hidden-params">
                        <label>Enter the number of imputations:</label><br>
                        <input type="text" name="n_imputations" placeholder="default=10" class="row-md-8"><br>
                        <label >Enter the maximum number of iterations:</label><br>
                        <input type="text" name="max_iter" placeholder="default=10" class="row-md-8"><br>
                        <label >Choose a method for each feature:</label><br>
                        <label class="radio-container">
                            <input type="radio" name="method" value="regression"> Regression
                            <span class="checkmark"></span>
                        </label>
                        <label class="radio-container">
                            <input type="radio" name="method" value="pmm"> Predictive Mean Matching (PMM)
                            <span class="checkmark"></span>
                        </label>
                    </div>
        
                    <!-- Parameters for Regression Imputation -->
                    <div id="regressionParams" class="hidden-params">
                        <label class="label">Choose a regression model:</label><br>
                        <label class="radio-container">
                            <input type="radio" name="regression_model" value="linear"> Linear Regression
                            <span class="checkmark"></span>
                        </label>
                        <label class="radio-container">
                            <input type="radio" name="regression_model" value="logistic"> Logistic Regression
                            <span class="checkmark"></span>
                        </label>
                        <h3 >Enter predictor features (comma separated):</h3><br>
                        <input type="text" name="predictors" class="row-md-8"><br>
                    </div>
        
                    <!-- Parameters for Autoencoder Imputation -->
                    <div id="autoencoderParams" class="hidden-params">
                        <label>Enter the number of hidden layers:</label><br>
                        <input type="text" name="hidden_layers" placeholder="2" class="row-md-8"><br>
                        <label >Choose an activation function:</label><br>
                        <label class="radio-container">
                            <input type="radio" name="activation" value="relu"> ReLU
                            <span class="checkmark"></span>
                        </label>
                        <label class="radio-container">
                            <input type="radio" name="activation" value="sigmoid"> Sigmoid
                            <span class="checkmark"></span>
                        </label>
                        <label >Enter the number of epochs:</label><br>
                        <input type="text" name="epochs" placeholder="50" class="row-md-8"><br>
                        <label >Enter the learning rate:</label><br>
                        <input type="text" name="learning_rate" placeholder="0.001" class="row-md-8"><br>
                    </div>
                </div>
                <br>
                <label >Enter the column names to process (comma separated, or 'all' to process all columns):</label><br>
                <input type="text" name="columns" required class="row-md-8"><br>
                <br>
                <button type="submit" class="btn-success">Submit</button>
            </form>
            
            <div id="missingValuesContainer" class="hidden"></div>


        
            <div id="saveOptions" class="hidden">
                <h3> Save Your File</h3>
                    <form id="saveFormatForm">
                    <label>Choose file format:</label><br>
                        <div class="file-format-options">
                        <label class="file-format-option">
                        <input type="radio" name="file_format" value="xlsx" required>
                        <span>XLSX</span>
                    </label>
                    <label class="file-format-option">
                        <input type="radio" name="file_format" value="csv" required>
                        <span>CSV</span>
                    </label>
                    <label class="file-format-option">
                        <input type="radio" name="file_format" value="json" required>
                        <span>JSON</span>
                    </label>
                    <label class="file-format-option">
                        <input type="radio" name="file_format" value="parquet" required>
                        <span>Parquet</span>
                    </label>
                    <label class="file-format-option">
                        <input type="radio" name="file_format" value="xml" required>
                        <span>XML</span>
                    </label>
                    <label class="file-format-option">
                        <input type="radio" name="file_format" value="html" required>
                        <span>HTML</span>
                    </label>
                </div>
                <br>
                <!--<label for="saveLocation">Select Save Location:</label>
                <select id="saveLocation" name="save_path" required>
                    <option value="documents">Documents</option>
                    <option value="downloads">Downloads</option>
                    <option value="desktop">Desktop</option>
                    <option value="custom">Custom Path</option>
                </select>-->
                <br>
                <div id="customPathField" style="display: none;">
                    <label for="customPath">Enter Custom Path:</label><br>
                    <input type="text" id="customPath" name="custom_path" placeholder="e.g., C:/Users/YourName/Folder">
                </div>
                <br>
                <label for="filename">Enter the Filename:</label><br>
                <input type="text" id="filename" name="filename" placeholder="e.g., report" required>
                <br>
                    <button type="submit" class="btn-success">Save File</button>
                </form>
            </div>
        <div id="saveMessage"></div>
    </div>  
</div>
</div>
<script>
    document.getElementById("fileInput").addEventListener("change", function () {
        var fileName = this.files.length > 0 ? this.files[0].name : "Choose a File";
        document.getElementById("filePlaceholder").textContent = fileName;
    });
    
</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="static/MV.js"></script>
</body>
</html>
